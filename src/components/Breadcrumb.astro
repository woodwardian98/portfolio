---
import { BREADCRUMB_MAP } from "../consts";

interface Props {
    currentPath: string;
}

const { currentPath } = Astro.props;

// Generate breadcrumb trail
const pathSegments = currentPath.split("/").filter(Boolean);
const breadcrumbs = [{ name: "Home", href: "/" }];

let currentHref = "";
for (const segment of pathSegments) {
    currentHref += `/${segment}`;
    const name =
        BREADCRUMB_MAP[currentHref] ||
        segment.charAt(0).toUpperCase() + segment.slice(1);
    breadcrumbs.push({ name, href: currentHref });
}
---

<div class="text-sm breadcrumbs">
    <ul>
        {
            breadcrumbs.map((crumb, index) => (
                <li>
                    {index === breadcrumbs.length - 1 ? (
                        <span class="text-base-content/60">{crumb.name}</span>
                    ) : (
                        <a href={crumb.href} class="link link-hover">
                            {crumb.name}
                        </a>
                    )}
                </li>
            ))
        }
    </ul>
</div>
